@import '../../utils'

.bar
  height unit(LOGGED_OUT_HEIGHT + BAR_PADDING_BOTTOM,em)
  position absolute
  top 0
  left 0
  width 100%
  z-index 2

  .centering
    height 100%


.desktop
  .bar > .centering
    opacity 0.5
    easeSlow('opacity')

    &:hover
      opacity 1
      easeSlow('opacity')

  [data-menu]:not([data-menu=""])
    .bar > .centering
      opacity 1

.bar-content
  position relative
  height 100%

.bar-border
  width 100%
  position absolute
  bottom unit(BAR_PADDING_BOTTOM, em)
  z-index -1
  left unit(- PADDING_SIDES_SMALL, em)
  padding 0 unit(PADDING_SIDES_SMALL, em)
  border-bottom unit(BOTTOM_BORDER, px) solid BOTTOM_COLOR

.logo-container 
  // text-align center
  // width 100%
  position absolute
  z-index 1
  left 0
  bottom unit(BAR_PADDING_BOTTOM + 2, em)

.logged-out
  .logo-container 
    bottom unit(BAR_PADDING_BOTTOM + 1, em)

.main-menu
  position absolute
  z-index 1
  right unit(PADDING_SIDES_SMALL, em)
  // bottom 3px
  bottom unit(BAR_PADDING_BOTTOM, em)
  margin-bottom 2px

  & > .dropdown-caret-center,
  & > .dropdown-menu
    display none

  & > .dropdown-menu
    right 0 !important
    left auto !important

  .menu-button-overlay
    top unit(- (1 + PADDING_SIDES_SMALL), em) !important
    left unit(- (1 + PADDING_SIDES_SMALL), em) !important
    padding unit(1 + PADDING_SIDES_SMALL, em)
    padding-bottom 3px

.main-menu .login-menu .menu-button-overlay,
.main-menu .user-menu .menu-button-overlay
  display none

.main-menu .login-menu .menu-button-overlay,
.main-menu .user-menu .menu-button-overlay,
.plus-menu .menu-button-overlay
  position absolute !important
  bottom 0
  top auto !important
  left -2px !important
  padding 1.6em 1.2em 0 2px !important

// because it's below the logo
.plus-menu .menu-button-overlay
  padding-top 0 !important


[data-menu~="on"]
  .main-menu
    & > .dropdown-caret-center,
    & > .dropdown-menu
      display block

    .menu-button
      .icon-bar
        background LINK_COLOR

[data-menu~="plus"].logged-in
  .right-div-min
    .plus-menu
      & > .dropdown-caret,
      & > .dropdown-menu
        display block
    .plus
      color LINK_COLOR !important

  .main-menu
    & > .dropdown-caret-center,
    & > .dropdown-menu
      display none

    .menu-button
      .icon-bar
        background black

    .user-menu
      & > .dropdown-caret-right,
      & > .dropdown-menu-right
        display none !important

    .user-name
      color BLACK_COLOR !important
      img
        border-color DARK_GRAY !important


.logo-h1
  margin 0
  font-size 1em
  // line-height unit(LOGGED_OUT_HEIGHT - TAB_HEAD - TAB_FOOT, em)
  // position absolute
  // bottom 0
  margin-bottom -3px
  @extend $inline-block
  font-smoothing antialiased

  span
    display none
    font-size 2em

  a
    cursor pointer
    padding-top 2em

    &, &:link, &:visited
      color BLACK_COLOR
      ease 'color'

    &:hover
      text-decoration none
      color LINK_COLOR
      ease 'color'

    &:before
      font-family spocdicons
      content: '\f053'
      font-size 2em
      font-weight normal

.log-in
  cursor pointer

  &, &:link, &:visited
    color BLACK_COLOR

.user-name
  cursor pointer
  &, &:link, &:visited
    color BLACK_COLOR

// [data-menu~='login'].logged-out .main-menu .log-in, .log-in:hover
//   text-decoration none
//   color LINK_COLOR !important
// 
// [data-menu~='user'].logged-in .main-menu .user-name, .user-name:hover
//   text-decoration none
//   color LINK_COLOR !important

.dropdown-menu li > a.invite-me, .invite-me
  @extend $button-green

.main-menu
  .right-div
    text-align left
    .invite-me
      display none

.right-div
  .invite-me
    margin-right 0
    margin-bottom 2px

  .user-name
    img
      width: 2em
      height 2em
      padding 0
      margin 1px 1em -0.6em 1px
      border-radius: 50%
      border 1px solid DARK_GRAY
      display none

.right-div-min
  position absolute
  bottom unit(BAR_PADDING_BOTTOM, em)
  right 0
  left 0
  margin-bottom -5px
  // text-align right

  .invite-me
    margin 0 0 2px !important

.logged-in
  .right-div-min
    .invite-me
      display none
    .plus-menu
      display inline-block

.logged-out
  .right-div-min
    .plus-menu
      display none

.main-menu
  .menu-toggle
    &:before
      font-family: 'spocdicons'
      content: '\f03f'

  .dropdown-menu
    float none
    left -0.5em

.made-in-ny
  display block
  background-image: url('img/made_in_ny.png')
  background-size cover
  width 40px
  height 40px
  margin auto

.login-menu, .user-menu
  & > .dropdown-caret-right,
  & > .dropdown-menu-right,
  .heading
    display none

.plus-menu
  width 100%

  & > .plus
    display inline-block

  & > .dropdown-caret,
  & > .dropdown-menu
    display none

  & > .menu-button-overlay
    width 2em

  & > .dropdown-menu
    text-align left
    // min-width 20em
    max-width 36em
    width 100%
    box-sizing border-box
    // left unit(- LOGO_WIDTH, em)
    left -7px
    padding-left 1em
    padding-right 1em


.bar-content
  .plus-menu
    & > .dropdown-menu
      padding-left 1em
      padding-right 1em
  .plus
    display inline-block
    padding 2px unit(PADDING_SIDES_SMALL, em)

    &, &:link, &:visited
      color lighten(LINK_COLOR, 20%)
      text-shadow 1px 1px lighten(LINK_COLOR, 80%)

    &:hover, &:active, &.active
      text-decoration none
      color LINK_COLOR

    &:before
      content: '\f035';
      font-family spocdicons
      font-size 1.5em

    span
      display none
      *display inline

WWS = WIDTH_WITH_SIDEBAR
WOS = WIDTH_WITHOUT_SIDEBAR
T1 = LOGGED_OUT_FULL
T10 = LOGGED_OUT_FULL_SMALL

MWWS = MEDIA_WITH_SIDEBAR
MT10 = "not screen and (min-width: " + (T10) + "em)"

// phone mode
@media MT10

  .body > .centering
    & > .content 
      margin-top unit(LOGGED_OUT_HEIGHT_PHONE + 2,em)
    .body_footer
      & > ul > li
        margin 0 1em
  .bar
    height unit(LOGGED_OUT_HEIGHT_PHONE + BAR_PADDING_BOTTOM,em)

  .logo-container
    left unit(- LOGO_WIDTH_REAL / 2, em)
    margin-left 50%
    bottom unit(BAR_PADDING_BOTTOM + 1, em)

  .plus-menu
    // & > .menu-button-overlay
    //   left auto !important
    //   right 0
    // & > .dropdown-caret
    //   left auto
    //   right 18px
    & > .dropdown-menu
      left auto
      // right 0
      padding-left unit(PADDING_SIDES_SMALL, em)
      padding-right unit(PADDING_SIDES_SMALL, em)

  // with menu shown
  [data-menu~='login'].logged-out, [data-menu~='user'].logged-in
    .main-menu
      .main-tabs
        display none

      .right-div
        & > .menu-divider 
          display none

        .login-menu, .user-menu
          .log-in, .user-name
            display none

          & > .dropdown-menu-right
            position static
            display block
            margin 0
            padding 0
            border 0
            box-shadow none

          .heading
            display block
            height 2em
            position relative
            z-index 2
            background #f5f5f5
            border-radius 4px 4px 0 0
            margin-top -10px

            .back
              position absolute
              display block 
              width 1em
              top 0.5em
              left 0.5em

              &, &:link, &:visited
                color #969696

              span
                display none

              &:before
                content '\f048'
                font-family spocdicons
                margin-left 0.1em
                margin-right 0.8em

              &:hover
                color LINK_COLOR
                text-decoration none

            h3
              margin-top 0
              padding 0 20px 0 2em
              font-size 1em
              font-weight bold
              line-height 2em
              white-space nowrap
              padding-right 20px
              text-align center


@import './bar_landing.styl'
@import './bar_logged_out.styl'

